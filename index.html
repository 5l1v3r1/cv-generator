<!DOCTYPE html>
<!--
Copyright (C) 2014 Maxime Falaize

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<html ng-app="cvGeneratorApp">
    <head>
        <title>CV Generator</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" media="screen" href="css/flags.css"/>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.15/angular.min.js"></script>
        <script type="text/javascript" src="js/generator.js"></script>
        <link rel="stylesheet" type="text/css" media="screen" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap.min.css"/>
        <link rel="stylesheet" type="text/css" media="screen" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap-theme.min.css"/>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/jszip.min.js"></script>
    </head>
    <body ng-controller="CVGeneratorController" ng-cloak>
        <div class="container">
            <header class="page-header">
                <h1>Curriculum Vitae Generator <small>v@VERSION@</small>
                    <span class="btn-group pull-right">
                        <input style="display:none;" type="file" id="savedFile">
                        <button class="btn btn-default" ng-click="loadCV()">{{locale.loadCV}}</button>
                        <button class="btn btn-primary" ng-click="generateCV()">{{locale.generateCV}}</button>
                    </span>
                </h1>
            </header>
            <ul class="nav nav-tabs">
                <li class="active">
                    <a href="#fr" data-toggle="tab">
                        <img src="img/blank.gif" class="flag flag-fr" alt="flag-fr"/>
                    </a>
                </li>
                <li>
                    <a href="#"><span class="glyphicon glyphicon-plus"></span></a>
                </li>
            </ul>
            <br/>
            <div class="tab-content">
                <div class="tab-pane active" id="fr">
                    <form class="form-horizontal">
                        <div ng-repeat="fi in fields" ng-init="field = fi">
                            <div class="form-group">
                                <div ng-if="fi.inputType !== 'panel'">
                                    <ng-include src="'fields.html'"></ng-include>
                                </div>
                                <div ng-if="fi.inputType === 'panel'">
                                    <h2>{{locale[fi.panel.key]}}
                                        <button ng-click="addField(fi.panel.key)" class="btn btn-success btn-xs"><span class="glyphicon glyphicon-plus"></span></button>
                                    </h2>
                                    <div class="panel-group" id="{{fi.panel.key}}-append"></div>
                                    <div draggable="true" class="panel panel-default" style="display: none;" id="{{fi.panel.key}}">
                                        <div class="panel-heading">
                                            <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="{{fi.panel.key}}-append" href="#">{{locale[fi.panel.key]}}</a>
                                                <span class="btn-group pull-right">
                                                    <button onclick="removeField(this)" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-minus"></span></button>
                                                </span>
                                            </h4>
                                        </div>
                                        <div class="panel-collapse collapse">
                                            <div class="panel-body">
                                                <div class="form-group" ng-repeat="f in fi.panel.fields" ng-init="field = f">
                                                    <ng-include src="'fields.html'"></ng-include>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div ng-if="getOption(field)">
                                <div class="form-group" ng-repeat="onchange in getOption(field).onchange" ng-init="field = onchange">
                                    <ng-include src="'fields.html'"></ng-include>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </body>
</html>
